- name: Bootstrap development environment
  hosts: localhost

  tasks:
    # - name: Run the equivalent of "pacman -Syu" as a separate step
    #   community.general.pacman:
    #     update_cache: yes
    #     upgrade: yes
    #   become: yes

    # - name: Delete zoxide
    #   community.general.pacman:
    #     name: zoxide
    #     state: absent
    #     force: yes
    #   become: yes

    # Read a CSV file and access the first item
    - name: Read users from CSV file and return a list
      community.general.read_csv:
        path: packages.csv
      register: users
      delegate_to: localhost

    # - ansible.builtin.debug:
    #     msg: "User {{ users.list.1.TAG }}"

    - name: Install packages
      community.general.pacman:
        name: "{{ users.list.1.PROGRAM }}"
        state: present
      become: yes

